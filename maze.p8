pico-8 cartridge // http://www.pico-8.com
version 16
__lua__
--plane-battle   
--by jerry and will benson
--this is a cool & fun game

function _init()
  cls()
  map(0,0,0,0,16,16)

  actors = {}

  cell_spr = 0 
  
  draw_maze()
  pl = make_actor(1,8,1)
  draw_actor(pl)
  
end

function _update()
  move_player()
end

function _draw()
  
  
  
end

function make_actor(x,y,spr)
  a={}
  a.x = x
  a.y = y
  a.spr = spr
  add(actors,a)

  return a
end


function draw_actor(a) 
  local sx = (a.x * 8) - 4
  local sy = (a.y * 8) - 4
  spr(a.spr, sx, sy)
end

function draw_maze() 
  is_finished = false
  local x = 0
  local y = 0
  while not is_finished do
    local cell_x = make_actor(x,8,cell_spr) 
    x = x + 1
    draw_actor(cell_x)

    
    local cell_y = make_actor(1,y,cell_spr) 
    y = y + 1
    draw_actor(cell_y)
    
    if (cell_x.x == 16 ) then
      is_finished = true
    end
  end
end
 
function is_cell(direction)

  if (direction == "right") then 
    if (is_in_actors(flr(pl.x + .1), pl.y) then 
      return true
    end
    if (pl.x + .1 == flr(pl.x + .1) ) then
      return true
    end
  end
   


function is_in_actors (x, y)
  for actor in all(actors) do 
    if (actor.spr == cell_spr) then
      --now we know actor is a cell
      if (actor.x == x and actor.y == y) then
        return true 
      end
    end  
  end
  return false 
end





function move_player()  
  --right
  local cell = {}
  cell.spr = 2
  if (btn(1) and is_cell("right") )  then
    cell.x = pl.x
    cell.y = pl.y  
    draw_actor(cell)
    pl.x = pl.x + .1
    draw_actor(pl)
  end
  --left
  if (btn(0) and is_cell("left") then
    cell.x = pl.x
    cell.y = pl.y  
    draw_actor(cell)
    pl.x = pl.x - .1
    draw_actor(pl)
  end
  --down
  if (btn(3) and is_cell("down") then
    cell.x = pl.x 
    cell.y = pl.y 
    draw_actor(cell)
    pl.y = pl.y + .1
    draw_actor(pl)
  end
  --up
  if (btn(2) and is_cell("up") then
    cell.x = pl.x 
    cell.y = pl.y 
    draw_actor(cell)
    pl.y = pl.y -.1
    draw_actor(pl)
  end
  


  print ("x: "..pl.x.." y "..pl.y, 0, 120, 9)
end  
__gfx__
77777777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
7777777700cc00000777777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
7777777700cf00000777777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
77777777000885500777777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
77777777000805000777777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
77777777008080000777777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
77777777088088000777777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
77777777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
44444444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
44444444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
44444444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
44444444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
44444444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
44444444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
44444444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
44444444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
1010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
